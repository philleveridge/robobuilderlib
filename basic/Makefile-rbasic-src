#makefile

PROJECT=BASIC
TARGET=rbasic
INCLUDES=-include /usr/include/errno.h
LDFLAGS=

CFLAGS =  -D LINUX -D PARSE -D OMNIMA -D IMAGE
CFLAGS += -g -Wall -gdwarf-2 -std=gnu99 -funsigned-char  # -funsigned-bitfields -fpack-struct -fshort-enums

REV = $(shell svnversion -n .)
CFLAGS += -D VER='"rbasic v=$(REV)\r\nCommands: i r l c z q s V R F $\r\n"'

OBJECTS = edit.o fix_fft.o  linux.o  lists.o express.o functions.o commands.o linux-remote.o basic.o matrix.o network.o fnetwork.o fmatrix.o trex.o oobj.o ostring.o ocells.o ostack.o odict.o rbmread.o ofunction.o  oexpress.o jpeg.o cmap.o

LIBS = -lpthread -lm -ljpeg



all: $(TARGET)

%.o: %.c
	$(CC) $(INCLUDES) $(CFLAGS) -c $<

$(TARGET): $(OBJECTS)
	 $(CC) $(LDFLAGS) $(OBJECTS) $(LIBDIRS) $(LIBS) -o $(TARGET)


#openwrt package makefile
world: compile

compile: $(OBJECTS)
	 $(CC) $(LDFLAGS) $(OBJECTS) $(LIBDIRS) $(LIBS) -o $(TARGET)

clean:
	rm -f *.o 
